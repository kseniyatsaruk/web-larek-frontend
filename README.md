# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Общее описание проекта
  Название: Web-ларёк
  Описание: интернет-магазин с товарами для веб-разработчиков. В нём можно посмотреть каталог товаров, добавить товары в корзину и сделать заказ. 

# Описание проекта
  В проекте реализован паттерн MVP (Model-View-Presenter), он обеспечивает разделение обязанностей между слоями.
    1. Model — данные, в которых отражена вся ценность приложения.
    2. View — интерфейс для взаимодействия с пользователем.
    3. Presenter - посредник между View и Model.
  Коммуникация между компонентами осуществляется через EventEmitter для полной независимости модулей и лёгкой масштабируемости.

# Описание классов

## EventEmitter
  Класс для управления событиями — «Брокер событий».
  Методы:
  - `on` - устанавливает обработчик на событие
  - `off` - снимает обработчик с события
  - `emit` - инициирует событие с данными
  - `onAll` - слушает все события
  - `offAll` - сбрасывает все обработчики
  - `trigger` - делает коллбек триггер, генерирующий событие при вызове

## ApiModel
  Класс-обёртка API.
  Методы:
  - `getProductCards` - получает список товаров
  - `postOrderLot` - отправляет заказ

## BasketModel
  Отвечает за: хранение товаров в корзине, расчёт суммы, счётчик, очистку корзины.
  Методы:
  - `getCount` - количество товаров
  - `getSumProducts` - сумма синапсов всех товаров в корзине
  - `setSelectedСard` - добавляет товар в корзину
  - `deleteSelectedCard` - удаляет товар из корзины
  - `clearBasket` - очищает корзину

## DataModel
  Хранит данные с сервера.
  `productCards` — массив всех товаров
  `selectedCard` — выбранная карточка
  Методы:
  - `setPreview` - данные открытой карточки

## FormModel
  Хранит и валидирует данные от пользователя.
  Методы:
  - `setOrderDelivery` - принимаем данные доставки
  - `setOrderContacts` - принимаем контактные данные
  - `validateDelivery` - проверяет данные доставки
  - `validateContacts` - проверяет контактные данные
  - `getOrder` - возвращает объект данных и выбранных товаров.

## CatalogCardView
  Отображение карточек товаров в каталоге.

## ProductPreviewView
  Отображение товара в модальном окне.
  Обрабатывает добавление товара в корзину.

## ModalView
  Работа модального окна.
  Умеет открывать/закрывать. Блокирует скролл страницы. Закрывается по кнопке или клику вне окна.

## BasketView
  Основной компонент корзины.
  Показывает список товаров. Общую сумму. Кнопку «Оформить».

## BasketItemView
  Отображает один товар в корзине с кнопкой удаления.

## ContactsFormView
  Форма для ввода контактных данных.

## OrderFormView
  Форма для ввода данных доставки.

## OrderSuccessView
  Рендерит экран «Заказ оформлен» с суммой.

# Взаимодействие компонентов
  1. Модели управляют данными и логикой приложения.
  2. Представления отображают интерфейс и передают события в EventEmitter.
  3. EventEmitter обрабатывает события, вызывая нужные методы моделей и обновляя представления.

# Типы данных
  Все типы и интерфейсы хранятся в `src/types/`.

```ts
/*
  * Описывает карточку товара в магазине
* */
interface IProduct {
  id: string;
  title: string;
  description: string;
  category: string;
  image: string;
  price: number | null;
  addedToBasket: boolean;
}

/*
  * Описывает поля заказа товара
* */
interface IOrderForm {
  payment: string;
  address: string;
  phone: string;
  email: string;
  total: number | string;
}

interface IOrderData extends IOrderForm {
  items: string[];
}

/*
  Описывает ошибки валидации форм
*/
type FormErrors = Partial<Record<keyof IOrderForm, string>>;
```
